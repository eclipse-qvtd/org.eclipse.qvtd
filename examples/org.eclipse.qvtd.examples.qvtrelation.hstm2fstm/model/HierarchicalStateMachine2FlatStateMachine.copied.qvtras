<?xml version="1.0" encoding="UTF-8"?>
<qvtr:RelationModel xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:pivot="http://www.eclipse.org/ocl/2015/Pivot"
    xmlns:qvtb="http://www.eclipse.org/qvt/2015/QVTbase" xmlns:qvtr="http://www.eclipse.org/qvt/2015/QVTrelation" xmlns:qvtt="http://www.eclipse.org/qvt/2015/QVTtemplate"
    xsi:schemaLocation="http://www.eclipse.org/ocl/2015/Pivot java://org.eclipse.ocl.pivot.PivotPackage http://www.eclipse.org/qvt/2015/QVTbase java://org.eclipse.qvtd.pivot.qvtbase.QVTbasePackage http://www.eclipse.org/qvt/2015/QVTrelation java://org.eclipse.qvtd.pivot.qvtrelation.QVTrelationPackage http://www.eclipse.org/qvt/2015/QVTtemplate java://org.eclipse.qvtd.pivot.qvttemplate.QVTtemplatePackage"
    xmi:id="AAAAA" externalURI="platform:/resource/org.eclipse.qvtd.examples.qvtrelation.hstm2fstm/src/org/eclipse/qvtd/examples/qvtrelation/hstm2fstm/HierarchicalStateMachine2FlatStateMachine.qvtr"
    name="HierarchicalStateMachine2FlatStateMachine.qvtr" xmiidVersion="1">
  <ownedComments body="*****************************************************************************&#xA;Copyright (c) 2007,2008 Tata Consultancy Services and others.&#xA;All rights reserved. This program and the accompanying materials&#xA;are made available under the terms of the Eclipse Public License v1.0&#xA;which accompanies this distribution, and is available at&#xA;http://www.eclipse.org/legal/epl-v10.html&#xA;&#xA;Contributors:&#xA;TCS - initial implementation for ModelMorf&#xA;E.D.Willink - alignment with evolved specification&#xA;E.D.Willink - rename / comment&#xA;*****************************************************************************"/>
  <ownedImports importedNamespace="pivot:Package HierarchicalStateMachine.ecore.oclas#5Ywco" name="hierMM" xmiidVersion="1">
    <ownedComments body="*****************************************************************************&#xA;Copyright (c) 2007,2008 Tata Consultancy Services and others.&#xA;All rights reserved. This program and the accompanying materials&#xA;are made available under the terms of the Eclipse Public License v1.0&#xA;which accompanies this distribution, and is available at&#xA;http://www.eclipse.org/legal/epl-v10.html&#xA;&#xA;Contributors:&#xA;TCS - initial implementation for ModelMorf&#xA;E.D.Willink - alignment with evolved specification&#xA;E.D.Willink - rename / comment&#xA;*****************************************************************************"/>
  </ownedImports>
  <ownedImports importedNamespace="pivot:Package FlatStateMachine.ecore.oclas#p4jCN" name="flatMM" xmiidVersion="1"/>
  <ownedPackages xmi:id="eB83I" name="org">
    <ownedPackages xmi:id="naMK7" name="eclipse">
      <ownedPackages xmi:id="aD4s6" name="qvtd">
        <ownedPackages xmi:id="1MBRa" name="examples">
          <ownedPackages xmi:id="G3fIr" name="qvtrelation">
            <ownedPackages xmi:id="ckzpq" name="hstm2fstm">
              <ownedClasses xsi:type="qvtr:RelationalTransformation" xmi:id="z9zUy" name="HierarchicalStateMachine2FlatStateMachine" superClasses="http://www.eclipse.org/ocl/2015/Library.oclas#zfDWR">
                <modelParameter xmi:id="VuJKK" name="hier" usedPackage="HierarchicalStateMachine.ecore.oclas#5Ywco"/>
                <modelParameter xmi:id="g27JK" name="flat" usedPackage="FlatStateMachine.ecore.oclas#p4jCN"/>
                <ownedComments body="Transform a hierarchical StateMachine into a flat StateMachine."/>
                <ownedContext xsi:type="pivot:ParameterVariable" name="this" type="#z9zUy"/>
                <ownedOperations xsi:type="qvtb:Function" xmi:id="j33Z4" name="getLeafStates" type="#sF7,P">
                  <ownedComments body="Return the leafStates of a given hierarchicalState."/>
                  <ownedParameters xsi:type="qvtb:FunctionParameter" xmi:id="KURA0" name="hierarchicalState" type="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4"/>
                  <queryExpression xsi:type="pivot:IteratorExp" isSafe="true" name="select" referredIteration="http://www.eclipse.org/ocl/2015/Library.oclas#u7yy0"
                      type="#nG7,P">
                    <ownedBody xsi:type="pivot:OperationCallExp" name="isEmpty" referredOperation="http://www.eclipse.org/ocl/2015/Library.oclas#ghkfR"
                        type="pivot:PrimitiveType http://www.eclipse.org/ocl/2015/Library.oclas#XEMMs">
                      <ownedSource xsi:type="pivot:PropertyCallExp" name="nestedStates" referredProperty="HierarchicalStateMachine.ecore.oclas#Qbs6b"
                          type="#sF7,P">
                        <ownedSource xsi:type="pivot:VariableExp" isImplicit="true" name="1_" referredVariable="#p,kyA" type="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4"/>
                      </ownedSource>
                    </ownedBody>
                    <ownedIterators xsi:type="pivot:IteratorVariable" xmi:id="p,kyA" isImplicit="true" name="1_" representedParameter="http://www.eclipse.org/ocl/2015/Library.oclas#//@ownedPackages.0/@ownedClasses.29/@ownedOperations.14/@ownedIterators.0"
                        type="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4"/>
                    <ownedSource xsi:type="pivot:IteratorExp" name="closure" referredIteration="http://www.eclipse.org/ocl/2015/Library.oclas#tQoce"
                        type="#nG7,P">
                      <ownedBody xsi:type="pivot:PropertyCallExp" name="nestedStates" referredProperty="HierarchicalStateMachine.ecore.oclas#Qbs6b"
                          type="#sF7,P">
                        <ownedSource xsi:type="pivot:VariableExp" isImplicit="true" name="1_" referredVariable="#dcVBM" type="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4"/>
                      </ownedBody>
                      <ownedIterators xsi:type="pivot:IteratorVariable" xmi:id="dcVBM" isImplicit="true" name="1_" representedParameter="http://www.eclipse.org/ocl/2015/Library.oclas#//@ownedPackages.0/@ownedClasses.29/@ownedOperations.10/@ownedIterators.0"
                          type="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4"/>
                      <ownedSource xsi:type="pivot:OperationCallExp" isImplicit="true" name="oclAsSet" referredOperation="http://www.eclipse.org/ocl/2015/Library.oclas#koUSM"
                          type="#sH7,P">
                        <ownedSource xsi:type="pivot:VariableExp" name="hierarchicalState" referredVariable="#KURA0" type="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4"/>
                      </ownedSource>
                    </ownedSource>
                  </queryExpression>
                </ownedOperations>
                <rule xsi:type="qvtr:Relation" xmi:id="Bvtjs" isTopLevel="true" name="HierachicalStateMachine2FlatStateMachine">
                  <domain xsi:type="qvtr:RelationDomain" isCheckable="true" isEnforceable="false" rootVariable="#I3VIh" typedModel="#VuJKK">
                    <pattern bindsTo="#I3VIh #KNlMV">
                      <templateExpression xsi:type="qvtt:ObjectTemplateExp" bindsTo="#I3VIh" referredClass="HierarchicalStateMachine.ecore.oclas#wid04"
                          type="pivot:Class HierarchicalStateMachine.ecore.oclas#wid04">
                        <part referredProperty="HierarchicalStateMachine.ecore.oclas#TkQBK">
                          <value xsi:type="qvtt:ObjectTemplateExp" bindsTo="#KNlMV" referredClass="http://www.eclipse.org/ocl/2015/Library.oclas#AlwVZ"
                              type="pivot:PrimitiveType http://www.eclipse.org/ocl/2015/Library.oclas#AlwVZ"/>
                        </part>
                      </templateExpression>
                    </pattern>
                  </domain>
                  <domain xsi:type="qvtr:RelationDomain" isCheckable="true" isEnforceable="true" rootVariable="#4Wnw3" typedModel="#g27JK">
                    <pattern bindsTo="#4Wnw3">
                      <templateExpression xsi:type="qvtt:ObjectTemplateExp" bindsTo="#4Wnw3" referredClass="FlatStateMachine.ecore.oclas#gD,6n"
                          type="pivot:Class FlatStateMachine.ecore.oclas#gD,6n">
                        <part referredProperty="FlatStateMachine.ecore.oclas#DC4Fl">
                          <value xsi:type="pivot:VariableExp" name="stateMachineName" referredVariable="#KNlMV" type="pivot:PrimitiveType http://www.eclipse.org/ocl/2015/Library.oclas#AlwVZ"/>
                        </part>
                      </templateExpression>
                    </pattern>
                  </domain>
                  <ownedComments body="Map each hierarchical StateMachine to a flat StateMachine"/>
                  <variable xsi:type="qvtr:TemplateVariable" xmi:id="4Wnw3" name="flatStateMachine" type="pivot:Class FlatStateMachine.ecore.oclas#gD,6n"/>
                  <variable xsi:type="qvtr:TemplateVariable" xmi:id="I3VIh" name="hierarchicalStateMachine" type="pivot:Class HierarchicalStateMachine.ecore.oclas#wid04"/>
                  <variable xsi:type="qvtr:TemplateVariable" xmi:id="KNlMV" name="stateMachineName" type="pivot:PrimitiveType http://www.eclipse.org/ocl/2015/Library.oclas#AlwVZ"/>
                </rule>
                <rule xsi:type="qvtr:Relation" isTopLevel="true" name="HierachicalTransition2FlatTransition">
                  <domain xsi:type="qvtr:RelationDomain" isCheckable="true" isEnforceable="false" rootVariable="#HRM7L" typedModel="#VuJKK">
                    <pattern bindsTo="#HQh1H #oMu9S #Wmu0M #HRM7L #Jw7v7">
                      <templateExpression xsi:type="qvtt:ObjectTemplateExp" bindsTo="#HRM7L" referredClass="HierarchicalStateMachine.ecore.oclas#PusjD"
                          type="pivot:Class HierarchicalStateMachine.ecore.oclas#PusjD">
                        <part referredProperty="HierarchicalStateMachine.ecore.oclas#yjCjh">
                          <value xsi:type="qvtt:ObjectTemplateExp" bindsTo="#HQh1H" referredClass="HierarchicalStateMachine.ecore.oclas#LaVS4"
                              type="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4"/>
                        </part>
                        <part referredProperty="HierarchicalStateMachine.ecore.oclas#2xamd">
                          <value xsi:type="qvtt:ObjectTemplateExp" bindsTo="#Jw7v7" referredClass="http://www.eclipse.org/ocl/2015/Library.oclas#AlwVZ"
                              type="pivot:PrimitiveType http://www.eclipse.org/ocl/2015/Library.oclas#AlwVZ"/>
                        </part>
                        <part referredProperty="HierarchicalStateMachine.ecore.oclas#dEfno">
                          <value xsi:type="qvtt:ObjectTemplateExp" bindsTo="#oMu9S" referredClass="HierarchicalStateMachine.ecore.oclas#wid04"
                              type="pivot:Class HierarchicalStateMachine.ecore.oclas#wid04"/>
                        </part>
                        <part referredProperty="HierarchicalStateMachine.ecore.oclas#Bzs6X">
                          <value xsi:type="qvtt:ObjectTemplateExp" bindsTo="#Wmu0M" referredClass="HierarchicalStateMachine.ecore.oclas#LaVS4"
                              type="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4"/>
                        </part>
                      </templateExpression>
                    </pattern>
                  </domain>
                  <domain xsi:type="qvtr:RelationDomain" isCheckable="true" isEnforceable="true" rootVariable="#3gx0C" typedModel="#g27JK">
                    <pattern bindsTo="#XIY3R #Ys,lp #mup,y #3gx0C">
                      <templateExpression xsi:type="qvtt:ObjectTemplateExp" bindsTo="#3gx0C" referredClass="FlatStateMachine.ecore.oclas#,OOqy"
                          type="pivot:Class FlatStateMachine.ecore.oclas#,OOqy">
                        <part referredProperty="FlatStateMachine.ecore.oclas#iBqn8">
                          <value xsi:type="qvtt:ObjectTemplateExp" bindsTo="#XIY3R" referredClass="FlatStateMachine.ecore.oclas#762Yn"
                              type="pivot:Class FlatStateMachine.ecore.oclas#762Yn"/>
                        </part>
                        <part referredProperty="FlatStateMachine.ecore.oclas#mPCr4">
                          <value xsi:type="pivot:VariableExp" name="transitionName" referredVariable="#Jw7v7" type="pivot:PrimitiveType http://www.eclipse.org/ocl/2015/Library.oclas#AlwVZ"/>
                        </part>
                        <part referredProperty="FlatStateMachine.ecore.oclas#NiGsD">
                          <value xsi:type="qvtt:ObjectTemplateExp" bindsTo="#Ys,lp" referredClass="FlatStateMachine.ecore.oclas#gD,6n"
                              type="pivot:Class FlatStateMachine.ecore.oclas#gD,6n"/>
                        </part>
                        <part referredProperty="FlatStateMachine.ecore.oclas#xQU,y">
                          <value xsi:type="qvtt:ObjectTemplateExp" bindsTo="#mup,y" referredClass="FlatStateMachine.ecore.oclas#762Yn"
                              type="pivot:Class FlatStateMachine.ecore.oclas#762Yn"/>
                        </part>
                      </templateExpression>
                    </pattern>
                  </domain>
                  <ownedComments body="Map each hierarchical Transition to a Flat Transition in the corresponding StateMachine&#xA;for each combination of possible leaf end states"/>
                  <variable xsi:type="qvtr:TemplateVariable" xmi:id="XIY3R" name="flatFromState" type="pivot:Class FlatStateMachine.ecore.oclas#762Yn"/>
                  <variable xsi:type="qvtr:TemplateVariable" xmi:id="Ys,lp" name="flatStateMachine" type="pivot:Class FlatStateMachine.ecore.oclas#gD,6n"/>
                  <variable xsi:type="qvtr:TemplateVariable" xmi:id="mup,y" name="flatToState" type="pivot:Class FlatStateMachine.ecore.oclas#762Yn"/>
                  <variable xsi:type="qvtr:TemplateVariable" xmi:id="3gx0C" name="flatTransition" type="pivot:Class FlatStateMachine.ecore.oclas#,OOqy"/>
                  <variable xsi:type="qvtr:TemplateVariable" xmi:id="HQh1H" name="hierarchicalFromState" type="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4"/>
                  <variable xsi:type="qvtr:TemplateVariable" xmi:id="oMu9S" name="hierarchicalStateMachine" type="pivot:Class HierarchicalStateMachine.ecore.oclas#wid04"/>
                  <variable xsi:type="qvtr:TemplateVariable" xmi:id="Wmu0M" name="hierarchicalToState" type="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4"/>
                  <variable xsi:type="qvtr:TemplateVariable" xmi:id="HRM7L" name="hierarchicalTransition" type="pivot:Class HierarchicalStateMachine.ecore.oclas#PusjD"/>
                  <variable xsi:type="qvtr:SharedVariable" xmi:id="SP,DX" name="leafFromState" type="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4"/>
                  <variable xsi:type="qvtr:SharedVariable" xmi:id="hAECU" name="leafToState" type="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4"/>
                  <variable xsi:type="qvtr:TemplateVariable" xmi:id="Jw7v7" name="transitionName" type="pivot:PrimitiveType http://www.eclipse.org/ocl/2015/Library.oclas#AlwVZ"/>
                  <variable xsi:type="qvtr:SharedVariable" xmi:id="TrFTL" name="leafFromStates" type="#sF7,P">
                    <ownedInit xsi:type="pivot:IteratorExp" name="select" referredIteration="http://www.eclipse.org/ocl/2015/Library.oclas#u7yy0"
                        type="#nG7,P">
                      <ownedBody xsi:type="pivot:OperationCallExp" name="isEmpty" referredOperation="http://www.eclipse.org/ocl/2015/Library.oclas#ghkfR"
                          type="pivot:PrimitiveType http://www.eclipse.org/ocl/2015/Library.oclas#XEMMs">
                        <ownedSource xsi:type="pivot:PropertyCallExp" name="nestedStates" referredProperty="HierarchicalStateMachine.ecore.oclas#Qbs6b"
                            type="#sF7,P">
                          <ownedSource xsi:type="pivot:VariableExp" isImplicit="true" isRequired="false" name="1_" referredVariable="#e7LOI"
                              type="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4"/>
                        </ownedSource>
                      </ownedBody>
                      <ownedIterators xsi:type="pivot:IteratorVariable" xmi:id="e7LOI" isImplicit="true" isRequired="false" name="1_"
                          representedParameter="http://www.eclipse.org/ocl/2015/Library.oclas#//@ownedPackages.0/@ownedClasses.29/@ownedOperations.14/@ownedIterators.0"
                          type="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4"/>
                      <ownedSource xsi:type="pivot:IteratorExp" name="closure" referredIteration="http://www.eclipse.org/ocl/2015/Library.oclas#tQoce"
                          type="#nG7,P">
                        <ownedBody xsi:type="pivot:PropertyCallExp" name="nestedStates" referredProperty="HierarchicalStateMachine.ecore.oclas#Qbs6b"
                            type="#sF7,P">
                          <ownedSource xsi:type="pivot:VariableExp" isImplicit="true" name="1_" referredVariable="#+4ddv" type="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4"/>
                        </ownedBody>
                        <ownedIterators xsi:type="pivot:IteratorVariable" xmi:id="+4ddv" isImplicit="true" name="1_" representedParameter="http://www.eclipse.org/ocl/2015/Library.oclas#//@ownedPackages.0/@ownedClasses.29/@ownedOperations.10/@ownedIterators.0"
                            type="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4"/>
                        <ownedSource xsi:type="pivot:OperationCallExp" isImplicit="true" name="oclAsSet" referredOperation="http://www.eclipse.org/ocl/2015/Library.oclas#koUSM"
                            type="#sH7,P">
                          <ownedSource xsi:type="pivot:VariableExp" name="hierarchicalFromState" referredVariable="#HQh1H" type="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4"/>
                        </ownedSource>
                      </ownedSource>
                    </ownedInit>
                  </variable>
                  <variable xsi:type="qvtr:SharedVariable" xmi:id="khZXt" name="leafToStates" type="#sF7,P">
                    <ownedInit xsi:type="pivot:IteratorExp" name="select" referredIteration="http://www.eclipse.org/ocl/2015/Library.oclas#u7yy0"
                        type="#nG7,P">
                      <ownedBody xsi:type="pivot:OperationCallExp" name="isEmpty" referredOperation="http://www.eclipse.org/ocl/2015/Library.oclas#ghkfR"
                          type="pivot:PrimitiveType http://www.eclipse.org/ocl/2015/Library.oclas#XEMMs">
                        <ownedSource xsi:type="pivot:PropertyCallExp" name="nestedStates" referredProperty="HierarchicalStateMachine.ecore.oclas#Qbs6b"
                            type="#sF7,P">
                          <ownedSource xsi:type="pivot:VariableExp" isImplicit="true" isRequired="false" name="1_" referredVariable="#3DlH2"
                              type="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4"/>
                        </ownedSource>
                      </ownedBody>
                      <ownedIterators xsi:type="pivot:IteratorVariable" xmi:id="3DlH2" isImplicit="true" isRequired="false" name="1_"
                          representedParameter="http://www.eclipse.org/ocl/2015/Library.oclas#//@ownedPackages.0/@ownedClasses.29/@ownedOperations.14/@ownedIterators.0"
                          type="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4"/>
                      <ownedSource xsi:type="pivot:IteratorExp" name="closure" referredIteration="http://www.eclipse.org/ocl/2015/Library.oclas#tQoce"
                          type="#nG7,P">
                        <ownedBody xsi:type="pivot:PropertyCallExp" name="nestedStates" referredProperty="HierarchicalStateMachine.ecore.oclas#Qbs6b"
                            type="#sF7,P">
                          <ownedSource xsi:type="pivot:VariableExp" isImplicit="true" name="1_" referredVariable="#zvYD8" type="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4"/>
                        </ownedBody>
                        <ownedIterators xsi:type="pivot:IteratorVariable" xmi:id="zvYD8" isImplicit="true" name="1_" representedParameter="http://www.eclipse.org/ocl/2015/Library.oclas#//@ownedPackages.0/@ownedClasses.29/@ownedOperations.10/@ownedIterators.0"
                            type="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4"/>
                        <ownedSource xsi:type="pivot:OperationCallExp" isImplicit="true" name="oclAsSet" referredOperation="http://www.eclipse.org/ocl/2015/Library.oclas#koUSM"
                            type="#sH7,P">
                          <ownedSource xsi:type="pivot:VariableExp" name="hierarchicalToState" referredVariable="#Wmu0M" type="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4"/>
                        </ownedSource>
                      </ownedSource>
                    </ownedInit>
                  </variable>
                  <when>
                    <predicate>
                      <conditionExpression xsi:type="qvtr:RelationCallExp" referredRelation="#Bvtjs" type="pivot:PrimitiveType http://www.eclipse.org/ocl/2015/Library.oclas#XEMMs">
                        <argument xsi:type="pivot:VariableExp" name="hierarchicalStateMachine" referredVariable="#oMu9S" type="pivot:Class HierarchicalStateMachine.ecore.oclas#wid04"/>
                        <argument xsi:type="pivot:VariableExp" name="flatStateMachine" referredVariable="#Ys,lp" type="pivot:Class FlatStateMachine.ecore.oclas#gD,6n"/>
                      </conditionExpression>
                    </predicate>
                    <predicate>
                      <conditionExpression xsi:type="qvtr:RelationCallExp" referredRelation="#M0EtC" type="pivot:PrimitiveType http://www.eclipse.org/ocl/2015/Library.oclas#XEMMs">
                        <argument xsi:type="pivot:VariableExp" name="leafFromState" referredVariable="#SP,DX" type="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4"/>
                        <argument xsi:type="pivot:VariableExp" name="flatFromState" referredVariable="#XIY3R" type="pivot:Class FlatStateMachine.ecore.oclas#762Yn"/>
                      </conditionExpression>
                    </predicate>
                    <predicate>
                      <conditionExpression xsi:type="qvtr:RelationCallExp" referredRelation="#M0EtC" type="pivot:PrimitiveType http://www.eclipse.org/ocl/2015/Library.oclas#XEMMs">
                        <argument xsi:type="pivot:VariableExp" name="leafToState" referredVariable="#hAECU" type="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4"/>
                        <argument xsi:type="pivot:VariableExp" name="flatToState" referredVariable="#mup,y" type="pivot:Class FlatStateMachine.ecore.oclas#762Yn"/>
                      </conditionExpression>
                    </predicate>
                    <predicate>
                      <conditionExpression xsi:type="pivot:OperationCallExp" name="includes" referredOperation="http://www.eclipse.org/ocl/2015/Library.oclas#BKNJO"
                          type="pivot:PrimitiveType http://www.eclipse.org/ocl/2015/Library.oclas#XEMMs">
                        <ownedArguments xsi:type="pivot:VariableExp" name="leafFromState" referredVariable="#SP,DX" type="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4"/>
                        <ownedSource xsi:type="pivot:VariableExp" name="leafFromStates" referredVariable="#TrFTL" type="#sF7,P"/>
                      </conditionExpression>
                    </predicate>
                    <predicate>
                      <conditionExpression xsi:type="pivot:OperationCallExp" name="includes" referredOperation="http://www.eclipse.org/ocl/2015/Library.oclas#BKNJO"
                          type="pivot:PrimitiveType http://www.eclipse.org/ocl/2015/Library.oclas#XEMMs">
                        <ownedArguments xsi:type="pivot:VariableExp" name="leafToState" referredVariable="#hAECU" type="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4"/>
                        <ownedSource xsi:type="pivot:VariableExp" name="leafToStates" referredVariable="#khZXt" type="#sF7,P"/>
                      </conditionExpression>
                    </predicate>
                  </when>
                </rule>
                <rule xsi:type="qvtr:Relation" xmi:id="M0EtC" isTopLevel="true" name="LeafState2FlatState">
                  <domain xsi:type="qvtr:RelationDomain" isCheckable="true" isEnforceable="false" rootVariable="#bU4db" typedModel="#VuJKK">
                    <pattern bindsTo="#nXjd0 #bU4db #EgGWY">
                      <templateExpression xsi:type="qvtt:ObjectTemplateExp" bindsTo="#bU4db" referredClass="HierarchicalStateMachine.ecore.oclas#LaVS4"
                          type="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4">
                        <part referredProperty="HierarchicalStateMachine.ecore.oclas#Cuflp">
                          <value xsi:type="qvtt:ObjectTemplateExp" bindsTo="#EgGWY" referredClass="http://www.eclipse.org/ocl/2015/Library.oclas#AlwVZ"
                              type="pivot:PrimitiveType http://www.eclipse.org/ocl/2015/Library.oclas#AlwVZ"/>
                        </part>
                        <part referredProperty="HierarchicalStateMachine.ecore.oclas#pAkm0">
                          <value xsi:type="qvtt:ObjectTemplateExp" bindsTo="#nXjd0" referredClass="HierarchicalStateMachine.ecore.oclas#wid04"
                              type="pivot:Class HierarchicalStateMachine.ecore.oclas#wid04"/>
                        </part>
                        <where xsi:type="pivot:OperationCallExp" name="isEmpty" referredOperation="http://www.eclipse.org/ocl/2015/Library.oclas#ghkfR"
                            type="pivot:PrimitiveType http://www.eclipse.org/ocl/2015/Library.oclas#XEMMs">
                          <ownedSource xsi:type="pivot:PropertyCallExp" name="nestedStates" referredProperty="HierarchicalStateMachine.ecore.oclas#Qbs6b"
                              type="#sF7,P">
                            <ownedSource xsi:type="pivot:VariableExp" name="leafState" referredVariable="#bU4db" type="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4"/>
                          </ownedSource>
                        </where>
                      </templateExpression>
                    </pattern>
                  </domain>
                  <domain xsi:type="qvtr:RelationDomain" isCheckable="true" isEnforceable="true" rootVariable="#g3P6Q" typedModel="#g27JK">
                    <pattern bindsTo="#g3P6Q #X30FL">
                      <templateExpression xsi:type="qvtt:ObjectTemplateExp" bindsTo="#g3P6Q" referredClass="FlatStateMachine.ecore.oclas#762Yn"
                          type="pivot:Class FlatStateMachine.ecore.oclas#762Yn">
                        <part referredProperty="FlatStateMachine.ecore.oclas#yLHqE">
                          <value xsi:type="pivot:VariableExp" name="stateName" referredVariable="#EgGWY" type="pivot:PrimitiveType http://www.eclipse.org/ocl/2015/Library.oclas#AlwVZ"/>
                        </part>
                        <part referredProperty="FlatStateMachine.ecore.oclas#ZeLrP">
                          <value xsi:type="qvtt:ObjectTemplateExp" bindsTo="#X30FL" referredClass="FlatStateMachine.ecore.oclas#gD,6n"
                              type="pivot:Class FlatStateMachine.ecore.oclas#gD,6n"/>
                        </part>
                      </templateExpression>
                    </pattern>
                  </domain>
                  <ownedComments body="Map each Leaf State to a Flat State in the corresponding StateMachine."/>
                  <variable xsi:type="qvtr:TemplateVariable" xmi:id="g3P6Q" name="flatState" type="pivot:Class FlatStateMachine.ecore.oclas#762Yn"/>
                  <variable xsi:type="qvtr:TemplateVariable" xmi:id="X30FL" name="flatStateMachine" type="pivot:Class FlatStateMachine.ecore.oclas#gD,6n"/>
                  <variable xsi:type="qvtr:TemplateVariable" xmi:id="nXjd0" name="hierarchicalStateMachine" type="pivot:Class HierarchicalStateMachine.ecore.oclas#wid04"/>
                  <variable xsi:type="qvtr:TemplateVariable" xmi:id="bU4db" name="leafState" type="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4"/>
                  <variable xsi:type="qvtr:TemplateVariable" xmi:id="EgGWY" name="stateName" type="pivot:PrimitiveType http://www.eclipse.org/ocl/2015/Library.oclas#AlwVZ"/>
                  <when>
                    <predicate>
                      <conditionExpression xsi:type="qvtr:RelationCallExp" referredRelation="#Bvtjs" type="pivot:PrimitiveType http://www.eclipse.org/ocl/2015/Library.oclas#XEMMs">
                        <argument xsi:type="pivot:VariableExp" name="hierarchicalStateMachine" referredVariable="#nXjd0" type="pivot:Class HierarchicalStateMachine.ecore.oclas#wid04"/>
                        <argument xsi:type="pivot:VariableExp" name="flatStateMachine" referredVariable="#X30FL" type="pivot:Class FlatStateMachine.ecore.oclas#gD,6n"/>
                      </conditionExpression>
                    </predicate>
                  </when>
                </rule>
              </ownedClasses>
            </ownedPackages>
          </ownedPackages>
        </ownedPackages>
      </ownedPackages>
    </ownedPackages>
  </ownedPackages>
  <ownedPackages URI="http://www.eclipse.org/ocl/2015/Orphanage" name="$$" nsPrefix="orphanage">
    <ownedClasses xsi:type="pivot:CollectionType" xmi:id="jgfBf" name="Collection" superClasses="http://www.eclipse.org/ocl/2015/Library.oclas#jbMkR">
      <ownedBindings>
        <ownedSubstitutions actual="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4" formal="http://www.eclipse.org/ocl/2015/Library.oclas#qs59R"/>
      </ownedBindings>
    </ownedClasses>
    <ownedClasses xsi:type="pivot:SetType" xmi:id="sF7,P" isNullFree="true" name="Set" superClasses="#UbP9O">
      <ownedBindings>
        <ownedSubstitutions actual="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4" formal="http://www.eclipse.org/ocl/2015/Library.oclas#ODsm5"/>
      </ownedBindings>
    </ownedClasses>
    <ownedClasses xsi:type="pivot:SetType" xmi:id="nG7,P" name="Set" superClasses="#UbP9O">
      <ownedBindings>
        <ownedSubstitutions actual="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4" formal="http://www.eclipse.org/ocl/2015/Library.oclas#ODsm5"/>
      </ownedBindings>
    </ownedClasses>
    <ownedClasses xsi:type="pivot:SetType" xmi:id="sH7,P" isNullFree="true" lower="1" name="Set" superClasses="#UbP9O" upper="1">
      <ownedBindings>
        <ownedSubstitutions actual="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4" formal="http://www.eclipse.org/ocl/2015/Library.oclas#ODsm5"/>
      </ownedBindings>
    </ownedClasses>
    <ownedClasses xsi:type="pivot:CollectionType" xmi:id="UbP9O" name="UniqueCollection" superClasses="#jgfBf">
      <ownedBindings>
        <ownedSubstitutions actual="pivot:Class HierarchicalStateMachine.ecore.oclas#LaVS4" formal="http://www.eclipse.org/ocl/2015/Library.oclas#jdfjE"/>
      </ownedBindings>
    </ownedClasses>
  </ownedPackages>
</qvtr:RelationModel>
