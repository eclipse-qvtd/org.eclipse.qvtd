/*******************************************************************************
 * Copyright (c) 2007,2008 Tata Consultancy Services and others.
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v1.0
 * which accompanies this distribution, and is available at
 * http://www.eclipse.org/legal/epl-v10.html
 *
 * Contributors:
 *     TCS - initial implementation for ModelMorf
 *     E.D.Willink - alignment with evolved specification
 *******************************************************************************/
import SeqMM : 'SeqMM.emof'::SeqMM; 
import StmcMM : 'StmcMM.emof'::StmcMM; 

transformation SeqToStm(seqDgm: SeqMM, stm: StmcMM)
{
     key StmcMM::StateMachine{name};
     key StmcMM::State{name,owner};
     key StmcMM::Transition{name,owner,fromState,toState};
     key StmcMM::SendMsg{message};
     key StmcMM::Message{messageId};


     top relation InteractionToStateMachine
     {
          sn: String;

          domain seqDgm i:Interaction {name = sn};
          enforce domain stm s:StateMachine {name = sn};
     }
     
     top relation StateToState
     {
          sn: String;

          domain seqDgm 
          st1:State 
          {
               name = sn--,
               --lifeline = l:LifeLine{interaction = i:Interaction{}}
          };

          enforce domain stm 
          st2:State 
          {
               name = sn--,
               --owner = s:StateMachine{}
          };

          --when
          --{
          --     InteractionToStateMachine(i, s);
          --}
     }

}
