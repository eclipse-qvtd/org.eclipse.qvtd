import ecore : 'http://www.eclipse.org/emf/2002/Ecore';

transformation Expressions {
	check source imports ecore;
	enforce target imports ecore;
	middle imports ecore;
}

map expressionsLM in Expressions {
	in:source dummy:EPackage;
    call expressionsMR {
    	binaryPrecedence uses (1 + 2) * (3*5 + 4);
    	unaryPrecedence uses -1 * - -1;
    	notPrecedence uses not not (4 = 5);
    }
}

map expressionsMR in Expressions {
	in:middle binaryPrecedence:OclAny;
	in:middle unaryPrecedence:OclAny;
	in:middle notPrecedence:OclAny;
}

map expressionsDomains in Expressions {
	var s : Integer := 0;
	var t : Integer := 0;
	var m : Integer := 0;
	var s_1 : Integer := m;
	var s_2 : Integer := t;
	var t_1 : Integer := s;
	var t_2 : Integer := m;
	var m_1 : Integer := s;
	var m_2 : Integer := t;
}

map expressionsMaps in Expressions {
--	var s1 : Boolean := Map{}->forAll(key <- value : String | key.toString().toUpper() = value);
	var s2 : Boolean := Map{1 <- '1'}->forAll(key <- value | key.toString().toUpper() = value);
	var s2a : Boolean := Map(Integer[1],String[1]){1 <- '1'}->forAll(key <- value | key.toString().toUpper() = value);
	var s2b : Boolean := Map(Integer[1],String[?]){1 <- '1'}->forAll(key <- value | key.toString().toUpper() = value);
	var s2c : Boolean := Map(Integer[?],String[1]){1 <- '1'}->forAll(key <- value | key.toString().toUpper() = value);
	var s2d : Boolean := Map(Integer[?],String[?]){1 <- '1'}->forAll(key1 <- value1, key2 <- value2 | key1.toString().toUpper() = value2);
--	var s3 : Boolean := Map{1 <- '1', true <- 'TRUE', false <- 'FALSE'}->forAll(key : OclAny <- value : String | key.toString().toUpper() = value);
}
